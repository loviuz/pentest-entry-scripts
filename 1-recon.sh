#!/bin/bash

. ./config

target=$1

if [ -z $target ]
then
    echo 'Please specify a target!'
    exit
fi

$browser
exit

report_path=reports/$target
mkdir -p $report_path

# Do the scan
sudo nmap -sS -F --script discovery,vuln $target -oX $report_path/recon.xml

# Set permissions to other users
sudo chmod -R o+x $report_path

# Convert scan to HTML
xsltproc reports/nmap-bootstrap.xsl $report_path/recon.xml -o $report_path/recon.html >/dev/null 2>&1

# Open scan
$browser file://$PWD/$report_path/recon.html
